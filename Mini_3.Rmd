---
title: "Mini-Project 3"
author: "Yifan Ma & Meghan Suslovic"
date: "April 9, 2018"
output: 
  html_document:
    code_folding: hide
    df_print: paged 

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE, echo=TRUE)
```

```{r}
library(tidyverse)
library(leaflet)
library(dplyr)
library(etl)
library(macleish)
library(sf)
```


Biking from Smith College to MacLeish is of interest to a subset of field station visitors. Considering that some bikers appreciate climbing hills and others wish to avoid hills, propose two alternative bike routes to the field station using the available data from MassGIS. Detail the lengths of the routes and the elevation change along the routes, and support your choices with data.

Supporting data includes:
School locations shapefile

Road shapefiles
MacLeish Field Station Property Boundary shapefile

```{r}
M_boundary <- macleish_layers[["boundary"]]

b <- leaflet() %>%
  addTiles(group = "OpenStreetMap") %>%
  addProviderTiles("Esri.WorldTopoMap", group = "Topography") %>%
  addProviderTiles("Esri.WorldImagery", group = "Satellite") %>%
  addProviderTiles("Stamen.TonerLite", group = "Toner Lite") %>%
  addPolygons(data = macleish_layers[["boundary"]], weight = 1, fillOpacity = 0.01, group = "Boundaries")
```

bike trails shapefiles

```{r, eval=FALSE}
url <- "http://wsgw.mass.gov/data/gispub/shape/state/biketrails_arc.zip"
local_file <- basename(url)
download.file(url, destfile = local_file)
unzip(local_file, exdir = "biketrails")

dsn <- path.expand("biketrails")
bike_trails <- read_sf(dsn)
bike_trails
```

```{r}
bike_trails_4326 <- bike_trails %>%
  st_transform(4326)
bike_trails_4326
```

scenic 

```{r}
url <- url <- "http://download.massgis.digital.mass.gov/shapefiles/state/contours250k.zip"
local_file <- basename(url)
download.file(url, destfile = local_file)
unzip(local_file, exdir = "scenic")
local_file <- basename(url)
download.file(url, destfile = local_file)
unzip(local_file, exdir = "scenic")

dsn <- path.expand("scenic")
scenic <- read_sf(dsn)

scenic_4326 <- scenic %>%
  st_transform(4326)

#scenic_4326 <- st_as_sf(scenic_4326) %>%
 # filter( geometry < 72.589193)
```


Elevation data

```{r, eval= FALSE}
url <- "http://download.massgis.digital.mass.gov/shapefiles/state/contours250k.zip"
local_file <- basename(url)
download.file(url, destfile = local_file)
unzip(local_file, exdir = "elevation")

dsn <- path.expand("elevation")
elevation <- read_sf(dsn)


```

Road data


```{r, eval= FALSE}
url <- "http://download.massgis.digital.mass.gov/shapefiles/census2010/CENSUS2010TIGERROADS_SHP.zip"
local_file <- basename(url)
download.file(url, destfile = local_file)
unzip(local_file, exdir = "TIGERroads")

```


```{r}
dsn <- path.expand("TIGERroads")
TIGERroads <- read_sf(dsn)

TIGERroads_4326 <- TIGERroads %>%
  st_transform(4326)

```

```{r}
R <- TIGERroads_4326 %>%
  filter(RTOWN == "CONWAY" | RTOWN == "WHATELY" | RTOWN == "WILLIAMSBURG" | RTOWN == "HATFIELD" | RTOWN == "DEERFIELD" | RTOWN == "NORTHAMPTON")
```

<<<<<<< HEAD
```{r}


```

=======
>>>>>>> cf776c84118b161c02f5bc967142f710ef3b01a9
```{r}
leaflet() %>%
  addTiles(group = "OpenStreetMap") %>%
  #addProviderTiles("Esri.WorldTopoMap", group = "Topography") %>%
  #addProviderTiles("Esri.WorldImagery", group = "Satellite") %>%
  #addProviderTiles("Stamen.TonerLite", group = "Toner Lite") %>%
  addPolygons(data = macleish_layers[["boundary"]], weight = 2, fillOpacity = 0.01, group = "Boundaries") %>%
  #addPolylines(data = scenic_4326) %>%
  #addPolylines(data = bike_trails_4326, color = "red") %>%
  addPolylines(data = R)
```

```{r}
<<<<<<< HEAD
names(macleish_layers)
```


```{r}
macleish_contour <- macleish_layers[["contours_30ft"]]
```

```{r}
require(leaflet)
mac_contour <- leaflet() %>%
  addTiles() %>%
  addPolygons(data = macleish_layers[["buildings"]], weight = 1, popup = ~name) %>%
  addPolylines(data = macleish_layers[["contours_30ft"]], weight = 1, color = "brown") %>%
  addPolylines(data = macleish_layers[["boundary"]], weight = 2)
mac_contour
=======

>>>>>>> cf776c84118b161c02f5bc967142f710ef3b01a9
```

